<p>
Abstract — The ever-increasing number of network requests exert pressure on enterprise-level websites and the bulk of websites use NGINX to handle requests, processing or ofﬂoading requests to upstream servers and sending back responses to clients. Native NGINX relies on kernel networking stack. This work presents VPPNGX, a high-performance NGINX implementation for public network request processing. VPPNGX is based on FD.io VPP, which is a DPDK-based high-performance, fully-featured user-space packet processing framework supporting L2-L7 networking stack to run on commodity CPUs. In order to employ FD.io VPP to VPPNGX, in VPP part, we propose VPP session index passthrough approach to removing VPP locked session layer that is designed to replace socket lock in kernel and that has negative impacts on scalability and latency of NGINX. We propose a token-based lock-free order-preserving approach to preserving the order of metadata of control event messages in VPP event queue after removing locked session layer. In NGINX part, we design a user-space uniﬁed blocking epoll scheme to replace the original busy-wait polling epoll to handle kernel and user-space epoll events together, which empowers our VPPNGX to reduce CPU usage and context switch for kernel epoll event checking. Consequently, VPPNGX achieves 3.33x higher throughput in RPS (requests per second) than kernel-based NGINX. It is capable of scaling up requests per second well and better than original VPPbased NGINX. The latency of VPPNGX is 46.7%, 34.1%, and 25.3% lower than that of F-Stack NGINX, original VPP-based NGINX, and kernel-based NGINX. It is also able to reduce CPU usage when load is low as well as context switch for kernel epoll checking.
</p>
<p>
Index Terms — nginx, fd.io vpp, user-space tcp/ip stack, request processing
</p>
